const CACHE_NAME = 'jt-website-cache-v4';
const urlsToCache = [
  '/',
  '/index.html',
  '/manifest.json',
  '/logo192.png',
  '/logo512.png',
  '/favicon.ico',
  '/assets/consulting.png',
  '/assets/ai-technology.png',
  '/assets/openai.png',
  '/assets/js.svg',
  '/assets/services-img.png',
  '/assets/ecommerce-img.png',
  '/assets/about-first-section.png',
  '/assets/tailwind.svg',
  '/assets/curve-img.png',
  '/assets/ionic.webp',
  '/assets/video-ai-asset-background (1).png',
  '/assets/leaves-holidays.png',
  '/assets/hire-us-contact-img.png',
  '/assets/education-img.png',
  '/assets/source-code.png',
  '/assets/oops-img.png',
  '/assets/our-news-letter-bg.png',
  '/assets/GWT.png',
  '/assets/JavaScript.png',
  '/assets/react-js.png',
  '/assets/groovy-grails.webp',
  '/assets/images/portfolio/tlc_engine-removebg-preview.png',
  '/assets/images/portfolio/quiz-12.png',
  '/assets/images/portfolio/pratibha-mockup.png',
  '/assets/images/portfolio/jt-website-mockup.png',
  '/assets/images/portfolio/CX-Group-Logo-Color.png',
  '/assets/images/portfolio/ante-think-mockup.png',
  '/assets/images/portfolio/pm2.png',
  '/assets/images/portfolio/Micro-C1.png',
  '/assets/images/portfolio/pvista-1.png',
  '/assets/images/portfolio/yatch-2.png',
  '/assets/images/portfolio/bank5.png',
  '/assets/images/portfolio/d3-showcase7.png',
  '/assets/images/portfolio/chatapp5.png',
  '/assets/images/portfolio/yatch-mockup.png',
  '/assets/images/portfolio/pub-audit-4.png',
  '/assets/images/portfolio/d3-home.png',
  '/assets/images/portfolio/book4.png',
  '/assets/images/portfolio/eneros-removebg-preview.png',
  '/assets/images/portfolio/ante-think-1.png',
  '/assets/images/portfolio/quiz-1.png',
  '/assets/images/portfolio/office-app6.jpg',
  '/assets/images/portfolio/EngageDetailView.png',
  '/assets/images/portfolio/Micro-C2.png',
  '/assets/images/portfolio/chatapp3.png',
  '/assets/images/portfolio/d3-showcase4.png',
  '/assets/images/portfolio/Micro-C3.png',
  '/assets/images/portfolio/yatch-1.png',
  '/assets/images/portfolio/quiz-16.png',
  '/assets/images/portfolio/pub-audit-mockup.png',
  '/assets/images/portfolio/jt-website7.png',
  '/assets/images/portfolio/navdurva2.png',
  '/assets/images/portfolio/ante-think.png',
  '/assets/images/portfolio/ProgressMaker_Logo.png',
  '/assets/images/portfolio/quiz-15.png',
  '/assets/images/portfolio/quiz-4.png',
  '/assets/images/portfolio/property-vista.png',
  '/assets/images/portfolio/Pratibha04.png',
  '/assets/images/portfolio/d3-showcase15.png',
  '/assets/images/portfolio/navdurva.png',
  '/assets/images/portfolio/pvista-5.png',
  '/assets/images/portfolio/Pratibha02.png',
  '/assets/images/portfolio/jt-website1.png',
  '/assets/images/portfolio/virtualcrm-2.png',
  '/assets/images/portfolio/progressmaker_background.png',
  '/assets/images/portfolio/book3.png',
  '/assets/images/portfolio/jt-website5.png',
  '/assets/images/portfolio/pvista-4.png',
  '/assets/images/portfolio/yatch-4.png',
  '/assets/images/portfolio/EngageDetailView1.png',
  '/assets/images/portfolio/d3-showcase14.png',
  '/assets/images/portfolio/virtualcrm-4.png',
  '/assets/images/portfolio/chatapp6.png',
  '/assets/images/portfolio/quiz-6.png',
  '/assets/images/portfolio/quiz-9.png',
  '/assets/images/portfolio/chatapp-mockup.png',
  '/assets/images/portfolio/quiz-3.png',
  '/assets/images/portfolio/d3-showcase9.png',
  '/assets/images/portfolio/Pratibha06.png',
  '/assets/images/portfolio/texture.png',
  '/assets/images/portfolio/d3-showcase12.png',
  '/assets/images/portfolio/pvista-7.png',
  '/assets/images/portfolio/d3-showcase3.png',
  '/assets/images/portfolio/pubaudit.png',
  '/assets/images/portfolio/jt-website4.png',
  '/assets/images/portfolio/Renacline3.png',
  '/assets/images/portfolio/book2.png',
  '/assets/images/portfolio/quiz-5.png',
  '/assets/images/portfolio/pratibhalogo.png',
  '/assets/images/portfolio/d3-showcase8.png',
  '/assets/images/portfolio/TLC-Results-PropertyMarker.jpg',
  '/assets/images/portfolio/favicon.png',
  '/assets/images/portfolio/jt-website3.png',
  '/assets/images/portfolio/book1.png',
  '/assets/images/portfolio/micro-c-mockup.png',
  '/assets/images/portfolio/EngageDetailView4.png',
  '/assets/images/portfolio/office-app2.jpg',
  '/assets/images/portfolio/d3-showcase-mockup.png',
  '/assets/images/portfolio/d3-showcase13.png',
  '/assets/images/portfolio/d3-showcase2.png',
  '/assets/images/portfolio/bank3.png',
  '/assets/images/portfolio/Pratibha01.png',
  '/assets/images/portfolio/pm1.png',
  '/assets/images/portfolio/virtualcrm-3.png',
  '/assets/images/portfolio/chatapp4.png',
  '/assets/images/portfolio/jt-website6.png',
  '/assets/images/portfolio/navdurva-mockup.png',
  '/assets/images/portfolio/entros.svg',
  '/assets/images/portfolio/office-app1.jpg',
  '/assets/images/portfolio/pvista-2.png',
  '/assets/images/portfolio/Pratibha05.png',
  '/assets/images/portfolio/bank2.png',
  '/assets/images/portfolio/office-app4.jpg',
  '/assets/images/portfolio/navdurva3.png',
  '/assets/images/portfolio/yacht-brochure-2.png',
  '/assets/images/portfolio/Renacline.png',
  '/assets/images/portfolio/Micro_logo.png',
  '/assets/images/portfolio/d3-showcase5.png',
  '/assets/images/portfolio/chatapp2.png',
  '/assets/images/portfolio/virtual-crm.png',
  '/assets/images/portfolio/renacline-mockup.png',
  '/assets/images/portfolio/pub-audit-3.png',
  '/assets/images/portfolio/pvista-3.png',
  '/assets/images/portfolio/jt-main.png',
  '/assets/images/portfolio/officemanagemnt-mockup.png',
  '/assets/images/portfolio/office-app5.jpg',
  '/assets/images/portfolio/quiz-7.png',
  '/assets/images/portfolio/bank6.png',
  '/assets/images/portfolio/quiz-2.png',
  '/assets/images/portfolio/pub-audit-1.png',
  '/assets/images/portfolio/quiz-mockup.png',
  '/assets/images/portfolio/tlc-engine.png',
  '/assets/images/portfolio/pvista-8.png',
  '/assets/images/portfolio/cx-group-mockup.png',
  '/assets/images/portfolio/TLC-Detail.jpg',
  '/assets/images/portfolio/bank1.png',
  '/assets/images/portfolio/yatch-brochure-mockup.png',
  '/assets/images/portfolio/booksite-mockup.png',
  '/assets/images/portfolio/quiz-10.png',
  '/assets/images/portfolio/yatch-3.png',
  '/assets/images/portfolio/TLC-Results-Wide.jpg',
  '/assets/images/portfolio/chatapp.png',
  '/assets/images/portfolio/d3-showcase1.png',
  '/assets/images/portfolio/quiz-8.png',
  '/assets/images/portfolio/pm3.png',
  '/assets/images/portfolio/d3-showcase10.png',
  '/assets/images/portfolio/jt-website8.png',
  '/assets/images/portfolio/tlc-mockup.png',
  '/assets/images/portfolio/EngageDetailView3.png',
  '/assets/images/portfolio/yacht-brochure-1.png',
  '/assets/images/portfolio/Micro-C4.png',
  '/assets/images/portfolio/jt-website2.png',
  '/assets/images/portfolio/TLC-EditProfile.jpg',
  '/assets/images/portfolio/quiz-11.png',
  '/assets/images/portfolio/quiz-14.png',
  '/assets/images/portfolio/bank4.png',
  '/assets/images/portfolio/quiz-17.png',
  '/assets/images/portfolio/progressmaker-mockup.png',
  '/assets/images/portfolio/Renacline2.png',
  '/assets/images/portfolio/boatsground.png',
  '/assets/images/portfolio/d3-showcase6.png',
  '/assets/images/portfolio/Pratibha03.png',
  '/assets/images/portfolio/EngageDetailView2.png',
  '/assets/images/portfolio/d3-showcase11.png',
  '/assets/images/portfolio/pvista-6.png',
  '/assets/images/portfolio/pub-audit-2.png',
  '/assets/images/portfolio/virtualcrm-1.png',
  '/assets/images/portfolio/pvista-mockup.png',
  '/assets/images/portfolio/Micro-C5.png',
  '/assets/images/portfolio/virtualcrm-mockup.png',
  '/assets/images/portfolio/quiz-13.png',
  '/assets/images/portfolio/yatch-5.png',
  '/assets/images/portfolio/ProgressMaker_Logo.svg',
  '/assets/images/hire-us-details/api-integration-developement.png',
  '/assets/images/hire-us-details/plugin-developement.png',
  '/assets/images/hire-us-details/maintenance&supports.png',
  '/assets/images/hire-us-details/custom-developement.png',
  '/assets/gemini.png',
  '/assets/service-header/consulting.png',
  '/assets/service-header/mobile-dev.png',
  '/assets/service-header/customization.png',
  '/assets/service-header/web-dev.png',
  '/assets/service-header/api.png',
  '/assets/service-header/product-dev.png',
  '/assets/service-header/deployment.png',
  '/assets/service-header/ai-generation.png',
  '/assets/java.png',
  '/assets/html.png',
  '/assets/book-universe.png',
  '/assets/grok-ai.png',
  '/assets/shaking-hands.png',
  '/assets/ionic.png',
  '/assets/deepseek.png',
  '/assets/customization.png',
  '/assets/postgresql.png',
  '/assets/web.png',
  '/assets/ui-ux-development.png',
  '/assets/ai-integration.png',
  '/assets/materialui.png',
  '/assets/deepseek.webp',
  '/assets/computer-laptop.png',
  '/assets/growth-development.png',
  '/assets/react-main-img.png',
  '/assets/star-img.png',
  '/assets/redis.svg',
  '/assets/shopify.png',
  '/assets/Eye.png',
  '/assets/react.png',
  '/assets/wave.png',
  '/assets/bootstrap.svg',
  '/assets/mobile.png',
  '/assets/hsqldb.png',
  '/assets/web-services.png',
  '/assets/node-js.png',
  '/assets/backend-development.png',
  '/assets/vue.png',
  '/assets/video-ai-asset-background.png',
  '/assets/groovy-grails.png',
  '/assets/home-meets.gif',
  '/assets/about-img.png',
  '/assets/collobrative-work-env-img.png',
  '/assets/python.webp',
  '/assets/java-main-img.png',
  '/assets/celebration-img.png',
  '/assets/company-logo.png',
  '/assets/api.png',
  '/assets/career-img.png',
  '/assets/express.png',
  '/assets/WordPress.png',
  '/assets/influx.png',
  '/assets/sqlite.png',
  '/assets/hire-us.png',
  '/assets/flutter.png',
  '/assets/meta-ai.png',
  '/assets/about-second-section.png',
  '/assets/career-details-img.png',
  '/assets/loom-cart.png',
  '/assets/offersection-Java.png',
  '/assets/ai.png',
  '/assets/apex-charts.webp',
  '/assets/redis.png',
  '/assets/materialui.webp',
  '/assets/android.png',
  '/assets/typescript.png',
  '/assets/angular-main-img.png',
  '/assets/realm.png',
  '/assets/app.png',
  '/assets/contact-img.png',
  '/assets/Goal.png',
  '/assets/mongodb.png',
  '/assets/next-js.png',
  '/assets/typescript.webp',
  '/assets/right.png',
  '/assets/python.png',
  '/assets/hire-us-java.png',
  '/assets/mysql.png',
  '/assets/designer.png',
  '/assets/products-development.png',
  '/assets/health-care-img.png',
  '/assets/ui-development.png',
  '/assets/captcha-image.png',
  '/assets/D3.png',
  '/assets/our-work-img.png',
  '/assets/firebase.png',
  '/assets/oracle.png',
  '/assets/derby.png',
  '/assets/hire-us-react.png',
  '/assets/claude.png',
  '/assets/flexible-working-hours-img.png',
  '/assets/contact-page.gif',
  '/assets/my-location.png',
  '/assets/deployment.png',
  '/assets/node.png',
  '/assets/apex-charts.png',
  '/assets/real-estate-img.png',
  '/assets/hire-us-angular.png',
  '/assets/Programming.png',
  '/assets/jfree-chart.webp',
  '/assets/spring.png',
  '/assets/deployment-of-app.png',
  '/assets/d3-showcase.png',
  '/assets/team-building-act-img.png',
  '/assets/highcharts.webp',
  '/assets/chart-js.png',
  '/assets/angular.png',
  '/assets/working-together.png',
  '/assets/logo.png',
  '/assets/service/consulting.png',
  '/assets/service/customization.png',
  '/assets/service/web-dev.png',
  '/assets/service/api.png',
  '/assets/service/ai.png',
  '/assets/service/product-dev.png',
  '/assets/service/mobile-development.png',
  '/assets/service/deployment.png',
  '/assets/angular-js.png',
  '/assets/hsqldb.webp',
  '/assets/appwrite.png',
  '/assets/product-development.png',
  '/assets/highcharts.png',
  '/assets/jyoti-technosoft-web-development.mp4',
];

self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache => cache.addAll(urlsToCache))
  );
});

self.addEventListener('activate', event => {
  event.waitUntil(
    caches.keys().then(cacheNames => {
      return Promise.all(
        cacheNames.filter(name => name !== CACHE_NAME).map(name => caches.delete(name))
      );
    })
  );
});

self.addEventListener('fetch', event => {
  // Normalize asset requests to always start with a leading slash
  let requestUrl = new URL(event.request.url);
  let normalizedPath = requestUrl.pathname;
  if (normalizedPath.startsWith('/assets/')) {
    // Try cache with leading slash
    event.respondWith(
      caches.match(normalizedPath).then(response => {
        if (response) return response;
        // Try without leading slash (for safety)
        return caches.match(normalizedPath.substring(1)).then(res2 => {
          return res2 || fetch(event.request).then(fetchResponse => {
            return caches.open(CACHE_NAME).then(cache => {
              cache.put(event.request, fetchResponse.clone());
              return fetchResponse;
            });
          });
        });
      })
    );
  } else if (normalizedPath.startsWith('assets/')) {
    // Add leading slash and try cache
    event.respondWith(
      caches.match('/' + normalizedPath).then(response => {
        if (response) return response;
        // Try as is
        return caches.match(normalizedPath).then(res2 => {
          return res2 || fetch(event.request).then(fetchResponse => {
            return caches.open(CACHE_NAME).then(cache => {
              cache.put(event.request, fetchResponse.clone());
              return fetchResponse;
            });
          });
        });
      })
    );
  } else {
    event.respondWith(
      caches.match(event.request)
        .then(response => response || fetch(event.request))
    );
  }
}); 